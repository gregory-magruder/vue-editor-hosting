(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{aOMp:function(t,e,a){"use strict";a.r(e);var s={name:"image-modal",props:{value:{type:Boolean,default:!1}},components:{SvgSpinner:function(){return a.e(9).then(a.bind(null,"ohFC"))},UppyUploader:function(){return Promise.all([a.e(1),a.e(4)]).then(a.bind(null,"cgbw"))}},data:function(){return{images:[],search:"",sort_alphabetical:!0,sort_date:!1,tab_id:0,deleting:!1,uploading:!1}},computed:{images_:function(){var t=this,e=this.images;return this.sort_alphabetical&&(e=e.sort((function(t,e){return t.name>e.name?1:-1}))),this.sort_date&&(e=e.sort((function(t,e){return t.date>e.date?1:-1}))),this.search&&(e=e.filter((function(e){return e.name.toLowerCase().indexOf(t.search.toLowerCase())>=0}))),e},selected_images:function(){return this.images.filter((function(t){return t.selected}))}},mounted:function(){this.initData(),this.loadImages()},methods:{initData:function(){this.images=[],this.tab_id=0,this.deleting=!1,this.sort_alphabetical=!0,this.sort_date=!1,this.uploading=!1},loadImages:function(){var t=this;return this.$axios({url:"/api/media",baseURL:"https://pixxo.nl",withCredentials:!1}).then((function(e){t.images=(e.data.images||[]).map((function(t,e){return t.id=e+1,t.name="Image_".concat(t.id),t.date="2020-05-2".concat(9-e),t.selected=!1,t}))}))},onDeleteImage:function(){this.deleting=!0},onConfirmDeletion:function(){this.selected_images.length&&(this.images=this.images.filter((function(t){return!t.selected})),this.deleting=!1)},onSelectImage:function(t){t.selected=!t.selected,this.deleting=!1},onUploadStart:function(t){this.uploading=!0},onUploadSuccess:function(t){var e=this;this.loadImages().then((function(){e.uploading=!1,e.tab_id=0}))}},watch:{value:function(){this.initData(),this.loadImages()}}},i=a("KHd+"),l=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("t-modal",{attrs:{"container-class":"flex items-center relative h-full mx-auto z-50","wrapper-class":"t-modal flex-auto bg-white rounded","overlay-class":"fixed left-0 top-0 bottom-0 right-0 bg-black opacity-75 z-40","body-class":"flex flex-col","hide-close-button":""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("div",{staticClass:"relative p-6"},[a("h2",{staticClass:"text-lg text-center leading-loose"},[t._v("Media Manager")]),t._v(" "),a("t-button",{staticClass:"t-btn-cancel absolute top-0 right-0 mt-6 mr-6",attrs:{size:"sm"},on:{click:function(e){return t.$emit("close")}}},[a("span",{staticClass:"mr-2"},[t._v("Close")]),t._v(" "),a("svg-icon",{attrs:{name:"close"}})],1)],1),t._v(" "),a("div",{staticClass:"flex bg-gray-100 border-b border-t px-6 pt-2"},[a("div",{staticClass:"w-1/2 relative"},[a("ul",{staticClass:"flex absolute bottom-0 font-semibold"},[a("li",{staticClass:"-mb-px mr-1"},[a("a",{class:["inline-block py-2 px-4",0===t.tab_id?"bg-white border-l border-t border-r rounded-t text-black":"text-blue-700 hover:text-black"],on:{click:function(e){t.tab_id=0}}},[t._v("\n            My media\n          ")])]),t._v(" "),a("li",{staticClass:"-mb-px mr-1"},[a("a",{class:["inline-block py-2 px-4",1===t.tab_id?"bg-white border-l border-t border-r rounded-t text-black":"text-blue-700 hover:text-black"],on:{click:function(e){t.tab_id=1}}},[t._v("\n            Upload media\n          ")])])])]),t._v(" "),a("div",{class:["w-1/2 pb-2 text-right",{invisible:1===t.tab_id}]},[t.selected_images.length?a("t-button",{attrs:{size:"sm"},on:{click:t.onDeleteImage}},[a("span",[t._v("Delete Selection")])]):t._e(),t._v(" "),a("t-button",{class:["ml-2",{disabled:!t.selected_images.length}],attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.$emit("add",t.selected_images)}}},[a("span",[t._v("Use image")])])],1)]),t._v(" "),0===t.tab_id?a("div",{staticClass:"flex items-center border-b border-gray-400 py-2"},[a("div",{staticClass:"w-1/2 px-6"},[a("span",[t._v("Sort by")]),t._v(" "),a("a",{class:["text-gray-500 font-bold ml-3",{"text-blue-700":t.sort_alphabetical}],on:{click:function(e){t.sort_date=!1,t.sort_alphabetical=!0}}},[t._v("\n        A-Z\n      ")]),t._v(" "),a("a",{class:["text-gray-500 font-bold ml-3",{"text-blue-700":t.sort_date}],on:{click:function(e){t.sort_alphabetical=!1,t.sort_date=!0}}},[t._v("\n        Date\n      ")])]),t._v(" "),a("div",{staticClass:"w-1/2 relative pr-6"},[a("svg-icon",{staticClass:"absolute text-gray-500 top-0 left-0 w-4 mt-2 ml-2",attrs:{name:"search"}}),t._v(" "),a("t-input",{staticClass:"w-full pl-8",attrs:{size:"sm"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)]):t._e(),t._v(" "),0===t.tab_id&&t.deleting&&t.selected_images.length?a("div",{staticClass:"flex items-center bg-red-300 text-danger mt-6 mx-6 p-3"},[a("div",{staticClass:"w-2/3 flex"},[a("svg-icon",{attrs:{name:"warning"}}),t._v(" "),a("span",{staticClass:"ml-2"},[t._v("Are you sure you want to delete these items?")])],1),t._v(" "),a("div",{staticClass:"w-1/3 text-right"},[a("a",{staticClass:"text-blue-700",on:{click:t.onConfirmDeletion}},[t._v("Yes")]),t._v(" "),a("a",{staticClass:"text-gray-700 ml-3",on:{click:function(e){t.deleting=!1}}},[t._v("No")])])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0===t.tab_id,expression:"tab_id === 0"}],staticClass:"flex flex-wrap h-64 max-h-full overflow-y-auto m-4"},[t._l(t.images_,(function(e,s){return a("div",{key:s,class:"w-1/3 p-2"},[a("div",{class:["relative text-white text-xs cursor-pointer",{"border border-success":e.selected}],on:{click:function(a){return t.onSelectImage(e)}}},[a("img",{staticClass:"w-full",attrs:{src:e.thumbnail}}),t._v(" "),a("span",{staticClass:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 p-1"},[t._v("\n          "+t._s(e.name)+"\n        ")]),t._v(" "),e.selected?a("svg-icon",{staticClass:"absolute top-0 right-0 w-5 mt-2 mr-2 text-success",attrs:{name:"checked"}}):t._e()],1)])})),t._v(" "),t.images_.length?t._e():a("div",{staticClass:"flex items-center justify-center h-full w-full"},[a("span",{staticClass:"text-gray-700"},[t._v("No media")])])],2),t._v(" "),1===t.tab_id?a("div",{staticClass:"flex h-64 max-h-full overflow-y-none my-10 px-10"},[a("uppy-uploader",{directives:[{name:"show",rawName:"v-show",value:!t.uploading,expression:"!uploading"}],on:{"upload-start":t.onUploadStart,"upload-success":t.onUploadSuccess,"upload-error":function(e){t.uploading=!1}}}),t._v(" "),t.uploading?a("svg-spinner",{staticClass:"w-40"}):t._e()],1):t._e()])}),[],!1,null,null,null);e.default=l.exports}}]);